document.addEventListener("DOMContentLoaded",function(){let e=new URL(getComputedStyle(document.body,"::before").backgroundImage.slice(5,-2)),t=new Image;t.onload=function(){document.body.classList.add("bg-loaded")},t.src=e,function(o){let n=document.getElementById(o);if(!n)return;let c=getComputedStyle(n,"::before").backgroundImage.split(",");e=new URL(c[c.length-1].trim().slice(5,-2)),t=new Image,t.onload=function(){n.classList.add("loaded")},t.src=e}("home-section-mobile");const o=document.getElementById("lightbox"),n=document.getElementById("lightboxImg");document.querySelectorAll(".blog-figure img").forEach(e=>{e.addEventListener("click",()=>{n.src=e.src,o.classList.add("active")})}),o.addEventListener("click",()=>{o.classList.remove("active")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&o.classList.contains("active")&&o.classList.remove("active")});const c=document.getElementById("mobile-menu-overlay"),l=document.querySelectorAll(".mobile-menu-item"),d=document.querySelector(".mobile-menu-trigger");let i=!1;function r(e){e?(c.style.display="block",i=!0):(c.style.display="none",i=!1)}d.addEventListener("click",()=>{r(!i)}),d.addEventListener("touchstart",e=>{e.preventDefault(),r(!i)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&i&&r(!1)}),l.forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href");if(o.startsWith("#")){t.preventDefault(),r(!1);const e=document.querySelector(o);e&&e.scrollIntoView({behavior:"auto"})}else r(!1)})});const s=document.getElementById("mobile-langchooser-overlay"),a=document.querySelectorAll(".mobile-langchooser-item"),u=document.querySelector(".copy-right");let m=!1;function y(e){e?(s.style.display="block",m=!0):(s.style.display="none",m=!1)}u.addEventListener("click",()=>{y(!m)}),u.addEventListener("touchstart",e=>{e.preventDefault(),y(!m)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&m&&y(!1)}),a.forEach(e=>{e.addEventListener("click",e=>{y(!1)})});const g=document.querySelectorAll(".blog-card"),v=document.querySelectorAll(".toc-link"),E=new IntersectionObserver(e=>{window.matchMedia("(min-width: 1400px)").matches&&e.forEach(e=>{if(e.isIntersecting){const t=e.target.querySelector("h1");if(t&&t.id){const e=t.id;v.forEach(e=>e.classList.remove("is-active"));document.querySelectorAll(`a[href="#${e}"]`).forEach(e=>e.classList.add("is-active"))}}})},{root:null,rootMargin:"-45% 0px -45% 0px",threshold:0});g.forEach(e=>{E.observe(e)})});